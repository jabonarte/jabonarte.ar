import{$ as h,$a as a,Ba as A,C as I,Ga as E,Ka as u,O as w,Ra as r,Sa as Q,Ua as O,Va as s,Wa as n,Xa as p,Ya as b,Za as S,_,_a as d,aa as C,ab as y,ba as T,bb as x,cb as q,m as B,wb as M,xa as o,xb as P,yb as R}from"./chunk-DZYPQVKR.js";var k=class t{questions=[{id:1,question:"\xBFC\xF3mo se siente tu piel por la ma\xF1ana?",options:[{id:"A",text:"Tirante y seca",value:"seca"},{id:"B",text:"Grasa y brillante",value:"grasa"},{id:"C",text:"Grasa en T, seca en mejillas",value:"mixta"},{id:"D",text:"C\xF3moda y equilibrada",value:"normal"}]},{id:2,question:"\xBFCon qu\xE9 frecuencia tienes brotes o granitos?",options:[{id:"A",text:"Raramente",value:"seca"},{id:"B",text:"Frecuentemente",value:"grasa"},{id:"C",text:"Solo en zona T",value:"mixta"},{id:"D",text:"Ocasionalmente",value:"normal"}]},{id:3,question:"\xBFC\xF3mo reacciona tu piel al sol?",options:[{id:"A",text:"Se irrita f\xE1cilmente",value:"seca"},{id:"B",text:"Produce m\xE1s grasa",value:"grasa"},{id:"C",text:"Var\xEDa seg\xFAn la zona",value:"mixta"},{id:"D",text:"Se broncea gradualmente",value:"normal"}]},{id:4,question:"\xBFC\xF3mo se ve tu piel sin maquillaje?",options:[{id:"A",text:"Opaca y descamada",value:"seca"},{id:"B",text:"Brillante y con poros visibles",value:"grasa"},{id:"C",text:"Brillante en T, normal en mejillas",value:"mixta"},{id:"D",text:"Uniforme y saludable",value:"normal"}]},{id:5,question:"\xBFQu\xE9 productos prefieres usar?",options:[{id:"A",text:"Cremas nutritivas y aceites",value:"seca"},{id:"B",text:"Geles y productos matificantes",value:"grasa"},{id:"C",text:"Diferentes productos por zona",value:"mixta"},{id:"D",text:"Productos suaves y equilibrados",value:"normal"}]}];skinTypeResults={1:{skinType:"seca",characteristics:["Sensaci\xF3n de tirantez","Descamaci\xF3n","Poros peque\xF1os","L\xEDneas finas tempranas"],recommendations:["Usa productos con \xE1cido hialur\xF3nico y ceramidas","Evita limpiadores agresivos","Aplica aceites nutritivos por la noche","Usa protector solar hidratante","Bebe mucha agua para hidrataci\xF3n interna"],products:["Jab\xF3n de Avena y Miel","S\xE9rum de \xC1cido Hialur\xF3nico","Aceite de Rosa Mosqueta","Crema Hidratante Aloe"]},2:{skinType:"grasa",characteristics:["Brillo excesivo","Poros dilatados","Tendencia al acn\xE9","Textura gruesa"],recommendations:["Usa productos con \xE1cido salic\xEDlico","Limpia dos veces al d\xEDa","Evita productos muy oleosos","Usa protector solar oil-free","Incorpora arcilla en tu rutina"],products:["Jab\xF3n Carb\xF3n Activado","S\xE9rum de Niacinamida","Aceite de Jojoba","Crema Gel Oil-Free"]},3:{skinType:"mixta",characteristics:["Zona T grasa","Mejillas secas/normales","Poros variables","Necesita cuidado dual"],recommendations:["Usa diferentes productos por zona","Controla la zona T con productos matificantes","Hidrata las mejillas con productos suaves","Usa protector solar universal","Aplica tratamientos espec\xEDficos por \xE1rea"],products:["Gel Limpiador Equilibrante","S\xE9rum de Niacinamida","Crema Diferenciada por Zonas","T\xF3nico Dual"]},4:{skinType:"normal",characteristics:["Equilibrada y saludable","Poros peque\xF1os","Textura suave","Sin brillos excesivos"],recommendations:["Mant\xE9n una rutina equilibrada","Usa protector solar diariamente","Incorpora antioxidantes como vitamina C","Hidrata regularmente","Exfolia suavemente una vez por semana"],products:["Jab\xF3n de Avena y Miel","S\xE9rum de Vitamina C","Crema Hidratante Aloe","Aceite de Jojoba"]}};getQuestions(){return B(this.questions).pipe(I(500))}calculateResult(i){if(!i||i.length===0){let c=this.skinTypeResults[4];return{skinType:c.skinType,score:0,characteristics:c.characteristics,recommendations:c.recommendations,products:c.products}}let e=i.reduce((c,v)=>(c[v.value]=(c[v.value]||0)+1,c),{}),l=Object.keys(e).reduce((c,v)=>e[c]>e[v]?c:v),f={seca:1,grasa:2,mixta:3,normal:4}[l],g=this.skinTypeResults[f];return{skinType:g.skinType,score:e[l]||0,characteristics:g.characteristics,recommendations:g.recommendations,products:g.products}}saveResultsToLocalStorage(i){let e={result:i,timestamp:new Date().toISOString(),version:"1.0"};localStorage.setItem("skinTestResults",JSON.stringify(e))}getResultsFromLocalStorage(){let i=localStorage.getItem("skinTestResults");if(i)try{return JSON.parse(i).result}catch{return null}return null}clearResultsFromLocalStorage(){localStorage.removeItem("skinTestResults")}static \u0275fac=function(e){return new(e||t)};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})};function V(t,i){t&1&&(s(0,"div",10),p(1,"div",11),n())}function z(t,i){if(t&1){let e=b();s(0,"div",16)(1,"div",17),C(),s(2,"svg",18),p(3,"path",19),n()(),T(),s(4,"h3",20),a(5," \xBFLista para descubrir tu tipo de piel? "),n(),s(6,"p",21),a(7," Este test te ayudar\xE1 a identificar tu tipo de piel y recibir recomendaciones personalizadas para tu rutina de cuidado. "),n(),s(8,"button",22),S("click",function(){_(e);let m=d(2);return h(m.startTest())}),a(9," Comenzar Test "),n()()}}function L(t,i){t&1&&(s(0,"span",39),a(1," \u2713 "),n())}function G(t,i){if(t&1){let e=b();s(0,"button",35),S("click",function(){let m=_(e).$implicit,f=d(4);return h(f.answerQuestion({questionId:f.currentQuestion.id,selectedOptionId:m.id,value:m.value}))}),s(1,"span",36),a(2),n(),s(3,"span",37),a(4),n(),u(5,L,2,0,"span",38),n()}if(t&2){let e=i.$implicit,l=d(4);O("w-full text-left p-4 border rounded-lg transition-colors "+(l.isOptionSelected(e.id)?"border-[#9CB1A3] bg-[#9CB1A3]/10":"border-[#DCC7B4] hover:bg-[#DCC7B4]/20 hover:border-[#9CB1A3] bg-transparent")),o(2),x("",e.id,"."),o(2),y(e.text),o(),r("ngIf",l.isOptionSelected(e.id))}}function N(t,i){if(t&1&&(s(0,"div",29)(1,"h4",30),a(2),n(),s(3,"div",31),u(4,G,6,5,"button",32),n(),s(5,"div",33)(6,"p",34),a(7," Seleccion\xE1 una opci\xF3n para continuar... "),n()()()),t&2){let e=d(3);o(2),x(" ",e.currentQuestion.question," "),o(2),r("ngForOf",e.currentQuestion.options)}}function H(t,i){if(t&1&&(s(0,"div",23)(1,"div",24)(2,"h3",25),a(3),n(),s(4,"div",26),p(5,"div",27),n()(),u(6,N,8,2,"div",28),n()),t&2){let e=d(2);o(3),q(" Pregunta ",e.currentQuestionIndex+1," de ",e.questions.length," "),o(2),Q("width",e.progress,"%"),o(),r("ngIf",e.currentQuestion)}}function U(t,i){if(t&1&&(s(0,"li",54)(1,"span",55),a(2,"\u2022"),n(),a(3),n()),t&2){let e=i.$implicit;o(3),x(" ",e," ")}}function J(t,i){if(t&1&&(s(0,"span",58),a(1),n()),t&2){let e=i.$implicit;o(),x(" ",e," ")}}function Y(t,i){if(t&1&&(s(0,"div",48)(1,"h4",49),a(2," Productos recomendados: "),n(),s(3,"div",56),u(4,J,2,1,"span",57),n()()),t&2){let e=d(4);o(4),r("ngForOf",e.result.products)}}function $(t,i){if(t&1){let e=b();s(0,"div",47)(1,"div",48)(2,"h4",49),a(3),n(),s(4,"ul",50),u(5,U,4,1,"li",51),n()(),u(6,Y,5,1,"div",52),s(7,"button",53),S("click",function(){_(e);let m=d(3);return h(m.resetTest())}),a(8," Hacer test nuevamente "),n()()}if(t&2){let e=d(3);o(3),x(" Recomendaciones para piel ",e.result.skinType,": "),o(2),r("ngForOf",e.result.recommendations),o(),r("ngIf",e.result.products==null?null:e.result.products.length)}}function Z(t,i){if(t&1&&(s(0,"div",23)(1,"div",40)(2,"div",41),C(),s(3,"svg",42),p(4,"path",19),n()(),T(),s(5,"h3",43),a(6,"\xA1Test Completado!"),n(),s(7,"p",44),a(8," Tu tipo de piel es: "),s(9,"strong",45),a(10),n()()(),u(11,$,9,3,"div",46),n()),t&2){let e=d(2);o(10),y(e.result==null?null:e.result.skinType),o(),r("ngIf",e.result)}}function K(t,i){if(t&1&&(s(0,"div",12)(1,"div",13),u(2,z,10,0,"div",14)(3,H,7,5,"div",15)(4,Z,12,2,"div",15),n()()),t&2){let e=d();o(2),r("ngIf",!e.isTestActive&&!e.isTestCompleted),o(),r("ngIf",e.isTestActive),o(),r("ngIf",e.isTestCompleted)}}var F=class t{constructor(i){this.skinTestService=i}questions=[];currentQuestion=null;currentQuestionIndex=0;isTestActive=!1;isTestCompleted=!1;result=null;loading=!1;progress=0;answers=[];ngOnInit(){this.loadQuestions()}loadQuestions(){this.loading=!0,this.skinTestService.getQuestions().subscribe({next:i=>{this.questions=i,this.loading=!1},error:i=>{console.error("Error loading questions:",i),this.loading=!1}})}startTest(){this.isTestActive=!0,this.currentQuestionIndex=0,this.currentQuestion=this.questions[0],this.answers=[],this.updateProgress()}answerQuestion(i){this.answers[this.currentQuestionIndex]=i,this.updateProgress(),this.currentQuestionIndex<this.questions.length-1?setTimeout(()=>{this.nextQuestion()},500):setTimeout(()=>{this.completeTest()},500)}nextQuestion(){this.currentQuestionIndex<this.questions.length-1&&(this.currentQuestionIndex++,this.currentQuestion=this.questions[this.currentQuestionIndex],this.updateProgress())}previousQuestion(){this.currentQuestionIndex>0&&(this.currentQuestionIndex--,this.currentQuestion=this.questions[this.currentQuestionIndex],this.updateProgress())}completeTest(){this.result=this.skinTestService.calculateResult(this.answers),this.isTestCompleted=!0,this.isTestActive=!1}resetTest(){this.isTestActive=!1,this.isTestCompleted=!1,this.currentQuestionIndex=0,this.currentQuestion=null,this.answers=[],this.result=null,this.progress=0}updateProgress(){this.progress=(this.currentQuestionIndex+1)/this.questions.length*100}get canGoNext(){return this.currentQuestionIndex<this.questions.length-1}get canGoPrevious(){return this.currentQuestionIndex>0}get isLastQuestion(){return this.currentQuestionIndex===this.questions.length-1}isOptionSelected(i){return this.answers[this.currentQuestionIndex]?.selectedOptionId===i}static \u0275fac=function(e){return new(e||t)(A(k))};static \u0275cmp=E({type:t,selectors:[["app-skin-test"]],decls:13,vars:2,consts:[[1,"min-h-screen","bg-[#FFF4EC]","py-20"],[1,"container","px-4","md:px-6"],[1,"text-center","space-y-4","mb-16"],[1,"inline-flex","items-center","px-4","py-2","bg-[#DCC7B4]","text-[#6B4C3B]","rounded-full","text-sm","font-medium"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 10V3L4 14h7v7l9-11h-7z"],[1,"text-3xl","font-bold","tracking-tight","sm:text-4xl","text-[#6B4C3B]"],[1,"text-xl","text-[#6B4C3B]/80","max-w-[800px]","mx-auto"],["class","flex justify-center items-center py-20",4,"ngIf"],["class","max-w-2xl mx-auto",4,"ngIf"],[1,"flex","justify-center","items-center","py-20"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-[#9CB1A3]"],[1,"max-w-2xl","mx-auto"],[1,"bg-white","rounded-lg","shadow-lg","border-0"],["class","p-8 text-center",4,"ngIf"],["class","p-8",4,"ngIf"],[1,"p-8","text-center"],[1,"w-16","h-16","bg-[#9CB1A3]/20","rounded-full","flex","items-center","justify-center","mx-auto","mb-6"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-[#9CB1A3]"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-2xl","font-bold","text-[#6B4C3B]","mb-4"],[1,"text-[#6B4C3B]/70","mb-8"],[1,"bg-[#9CB1A3]","hover:bg-[#9CB1A3]/90","text-white","rounded-full","px-8","py-3","font-medium","transition-colors",3,"click"],[1,"p-8"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-lg","font-semibold","text-[#6B4C3B]"],[1,"w-32","bg-[#DCC7B4]/30","rounded-full","h-2"],[1,"bg-[#9CB1A3]","h-2","rounded-full","transition-all","duration-300"],["class","space-y-6",4,"ngIf"],[1,"space-y-6"],[1,"text-lg","text-[#6B4C3B]","font-medium"],[1,"space-y-3"],[3,"class","click",4,"ngFor","ngForOf"],[1,"text-center","pt-6"],[1,"text-sm","text-[#6B4C3B]/70"],[3,"click"],[1,"font-semibold","text-[#9CB1A3]","mr-3"],[1,"text-[#6B4C3B]"],["class","float-right text-[#9CB1A3]",4,"ngIf"],[1,"float-right","text-[#9CB1A3]"],[1,"text-center","space-y-6"],[1,"w-16","h-16","bg-[#9CB1A3]","rounded-full","flex","items-center","justify-center","mx-auto"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-white"],[1,"text-2xl","font-bold","text-[#6B4C3B]"],[1,"text-lg","text-[#6B4C3B]"],[1,"text-[#9CB1A3]","capitalize"],["class","mt-8 space-y-6",4,"ngIf"],[1,"mt-8","space-y-6"],[1,"bg-[#DCC7B4]/20","p-6","rounded-lg"],[1,"font-semibold","text-[#6B4C3B]","mb-3"],[1,"space-y-2","text-[#6B4C3B]/80"],["class","flex items-start",4,"ngFor","ngForOf"],["class","bg-[#DCC7B4]/20 p-6 rounded-lg",4,"ngIf"],[1,"w-full","bg-[#9CB1A3]","hover:bg-[#9CB1A3]/90","text-white","rounded-full","py-3","font-medium","transition-colors",3,"click"],[1,"flex","items-start"],[1,"text-[#9CB1A3]","mr-2"],[1,"flex","flex-wrap","gap-2"],["class","px-3 py-1 bg-[#9CB1A3]/20 text-[#6B4C3B] rounded-full text-sm",4,"ngFor","ngForOf"],[1,"px-3","py-1","bg-[#9CB1A3]/20","text-[#6B4C3B]","rounded-full","text-sm"]],template:function(e,l){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),C(),s(4,"svg",4),p(5,"path",5),n(),a(6," Test Personalizado "),n(),T(),s(7,"h2",6),a(8," Identific\xE1 tu tipo de piel "),n(),s(9,"p",7),a(10," Respond\xE9 estas preguntas para descubrir tu tipo de piel y recibir recomendaciones personalizadas. "),n()(),u(11,V,2,0,"div",8)(12,K,5,3,"div",9),n()()),e&2&&(o(11),r("ngIf",l.loading),o(),r("ngIf",!l.loading))},dependencies:[R,M,P],styles:[".skin-test-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#fff4ec,#dcc7b4)}.test-card[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:#fffffff2;border:1px solid rgba(220,199,180,.2)}.option-button[_ngcontent-%COMP%]{transition:all .3s ease}.option-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #9cb1a333}.option-button[_ngcontent-%COMP%]:active{transform:translateY(0)}.progress-bar[_ngcontent-%COMP%]{transition:width .5s ease-in-out}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.slide-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}"]})};export{F as a};
